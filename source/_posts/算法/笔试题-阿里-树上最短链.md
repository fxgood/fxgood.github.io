---
title: 笔试题-阿里-树上最短链
category: 算法
tag:
- 笔试题
- 阿里
excerpt: 链式前向星yyds! 写题的细心度需要在提升提升!
---

[牛客网-阿里-树上最短链](https://www.nowcoder.com/question/next?pid=30440638&qid=1664957&tid=57787219)

关键的问题是: 题意给的是极小连通子图(生成树) 也就意味着

- 图中任意两点之间有且只有一条通路
- 图中没有环(结论一可以推出)

所以这题可以直接用bfs

- bfs可以求路径长度为1的最短路径问题

```java
//极小连通子图=生成树 任意两点之间有且只有一条路径 因为没有环
import java.util.*;
public class Main{
    public static void main(String[]args){
        Scanner sc=new Scanner(System.in);
        int n=sc.nextInt();
        int[]grade=new int[n+1];
        for(int i=0;i<n;i++)
            grade[i+1]=sc.nextInt();
        //链式前向星存储图 空间复杂度是ON
        int[][]edge=new int[2*n-2][2];    //边表,从0开始
        int[]head=new int[n+1];    //指向所连接的第一条边,从1开始
        Arrays.fill(head,-1);
        int cnt=0;    //边的数量
        for(int i=0;i<n-1;i++){
            int a=sc.nextInt();
            int b=sc.nextInt();
            //添加两条边
            edge[cnt][0]=b;
            edge[cnt][1]=head[a];
            head[a]=cnt++;
            edge[cnt][0]=a;
            edge[cnt][1]=head[b];
            head[b]=cnt++;
        }
        int ans=0x3fffffff;
        for(int i=1;i<=n;i++){    //计算i到其他所有节点的最短距离
            boolean[]visit=new boolean[n+1];
            Queue<int[]>que=new LinkedList<>();
            que.offer(new int[]{i,0});    //能放进去的都是合法的
            visit[i]=true;
            while(!que.isEmpty()){
                int[]f=que.poll();
                //遍历所有f[0]能到达的节点
                int k=f[0];
                int h=f[1];
                if(k!=i && grade[k]==grade[i]){
                    ans=Math.min(ans,h);
                }
                int t=head[k];
                while(t!=-1){
                    int e=edge[t][0];
                    if(!visit[e]){
                        visit[e]=true;
                        que.offer(new int[]{e,h+1});
                    }
                    t=edge[t][1];
                }
            }
        }
        if(ans!=0x3fffffff)
            System.out.println(ans);
        else
            System.out.println(-1);
    }
}
```

