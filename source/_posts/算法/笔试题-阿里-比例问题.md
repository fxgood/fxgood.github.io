---
title: 比例问题
category: 算法
tag:
- 阿里
- 笔试题
excerpt: 应用了二分和GCD算法!
---

[牛客-阿里-比例问题](https://www.nowcoder.com/test/question/done?tid=57886750&qid=1664935#summary)

思路

1. 首先,根据比例公式得到,x和y是正比例关系,因此y或者x越大,xy的乘积越大
2. 其次,本能地想到要用最大公因数来约分比例
3. 脱离编程来思考这个问题
   - 例如 `1000 500 3 2`
   - 固定左边的数,即在1000以内找一个数x,使得$3*x<=1000$并且满足$2*x<=500$
   - 那么1000以内三的倍数有很多个,并且值是递增的(顺序->立即推->二分!)

聪明反被聪明误! 我想用递归来保证a>=b,却没想到最后结果要按照原来的顺序打印!

```java
//bx=ay
//xy
import java.util.*;
public class Main{
    public static void main(String[]args){
        new Main().solve();    
    }
    void solve(){
        Scanner sc=new Scanner(System.in);
        int A=sc.nextInt();
        int B=sc.nextInt();
        int a=sc.nextInt();
        int b=sc.nextInt();
        f(A,B,a,b);
    }
    
    //最大公因数
    int gcd(int a,int b){
        if(b==0)
            return a;
        return gcd(b,a%b);
    }
    
    void f(int A,int B,int a,int b){
        if(a==b){
            int t=Math.min(A,B);
            System.out.println(t+" "+t);
            return;
        }
        int gcd=gcd(a,b);
        a/=gcd;
        b/=gcd;
        //二分搜索
        int l=1,r=A/a;
        int ans=-1;
        while(l<=r){
            int m=l+(r-l)/2;
            if(m*b<=B){
                ans=m;
                l=m+1;
            }else{
                r=m-1;
            }
        }
        if(ans==-1)
            System.out.println(0+" "+0);
        else
            System.out.println(ans*a+" "+ans*b);
    }
}
```

---

看了题解之后,发现他的写法更牛

要求**x**和**y**的乘积最大其实就是要**x**尽可能大（或y尽可能大），因为比例**a/b**已经固定了，**y=x\*b/a**并没有什么操作空间。

先求取**a**和**b**的最大公约数将**a/b**化为最简分式，我们可以认为存在一个单元**unit**，使得**x=a\*unit**，**y=b\*unit**，因此可以得到**unit1=x/a**，**unit2=y/b**。

由**x/y=a/b**可知**x/a=y/b**，而**x/a<=A/a**，因此**unit1<=A/a**，同理**unit2<=B/b**，因此**unit**只需要同时满足不大于**A/a**和不大于**B/b**即可。又因为**x**要尽可能大，所以**unit**就要尽可能大，于是得到**unit=min(A/a,B/b)**

```java
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;

public class Main {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String[] params = br.readLine().trim().split(" ");
        int A = Integer.parseInt(params[0]), B = Integer.parseInt(params[1]), a = Integer.parseInt(params[2]), b = Integer.parseInt(params[3]);
        int greatestCommonDivisor = gcd(a, b);
        // 先约分
        a /= greatestCommonDivisor;
        b /= greatestCommonDivisor;
        // 然后计算unit
        int unit = Math.min(A / a, B / b);	//选一个更小的单元!
        // x占a份unit，y占b份unit
        System.out.println(unit * a + " " + unit * b);
    }
    
    private static int gcd(int a, int b){
        if(a < b){
            int temp = a;
            a = b;
            b = temp;
        }
        while(b > 0){
            int temp = a % b;
            a = b;
            b = temp;
        }
        return a;
    }
}
```

