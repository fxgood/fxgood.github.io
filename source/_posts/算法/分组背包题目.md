---
title: 分组01背包题目
category: 算法
tag: 
- 动态规划
---

分组01背包，其实本质还是01背包，只不过01背包是每样物品最多只能选一次，分组01背包是每组中的元素只能选一个。

一般01背包是把物品序号作为dp的一个维度，这样保证了选中物品的唯一性；

分组01背包是把组号作为dp的一个维度，这样保证了每一组只选一个。

<!--more-->

题目

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220417224515476.png" alt="image-20220417224515476" style="zoom:50%;" />

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220417224531509.png" alt="image-20220417224531509" style="zoom:50%;" />

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220417224543487.png" alt="image-20220417224543487" style="zoom:50%;" />

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20220417224551751.png" alt="image-20220417224551751" style="zoom:50%;" />

```
测试用例：
2
12
1 12 6
1 14 10
2 22 3
2 3 38
3 24 1
3 3 15
3 11 23
4 13 2
5 19 10
5 17 11
5 16 2
6 20 2
11
1 14 16
1 17 3
2 6 32
3 3 24
4 12 3
4 13 0
5 22 5
5 21 4
6 3 37
6 14 6
6 23 0
```



```cpp
#include<iostream>
#include<vector>
using namespace std;
int t,n;
int p,c,d;

int main(){
    cin>>t;
    while(t--){
        cin>>n;
        vector<vector<int>>dp(6,vector<int>(25*6+1,-1));
        //dp[i][j]表示 第i组物品，剩余暴击为j的情况下，能达到的最大暴击伤害
        vector<vector<int>>chance(6,vector<int>());
        vector<vector<int>>damage(6,vector<int>());
        for(int i=0;i<n;i++){
            cin>>p>>c>>d;
            chance[p-1].push_back(c);
            damage[p-1].push_back(d);
        }
        for(int k=0;k<chance[0].size();k++){
            dp[0][chance[0][k]]=max(dp[0][chance[0][k]],damage[0][k]);
        }
        for(int i=1;i<6;i++){
            for(int j=1;j<=25*6;j++) //剩余可用暴击率为k
            for(int k=0;k<chance[i].size();k++){
                int ch=chance[i][k];
                int da=damage[i][k];
                if(ch<=j && dp[i-1][j-ch]!=-1){
                    dp[i][j]=max(dp[i][j],dp[i-1][j-ch]+da);
                }
            }
        }
        int res=-1;
        for(int i=100;i<=25*6;i++){
            res=max(res,dp[5][i]);
        }
        if(res==-1)
            cout<<"TAT"<<endl;
        else
            cout<<res<<endl;
    }
    return 0;
}
```

