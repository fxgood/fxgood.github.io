---
title: 最长回文子序列
date: 2020-04-25
category: 算法
tag:
- 动态规划
---

> 刷算法题时遇到这道求最长回文子序列长度的题，因为其子序列不要求连续，跟普通求回文子序列不同，因此加以记录

<!--more-->

[最长回文子序列](https://leetcode-cn.com/problems/longest-palindromic-subsequence/)

* 题目描述：给定一仅由大小写字母组成的字符串，求其回文子序列的最大长度，回文子序列指正反读都一样的子序列，如madam。本题中大小写不敏感，即a和A相同。
* 输入描述：输入包含一行字符串，长度不超过300
* 输出描述：输出该字符串最长回文子序列的长度
* 输入样例：ABCdca
* 输出样例：5
* **提示：子序列不要求连续**
***

**方法一：二维动态规划**
```java
class Solution {
public:
    int dp[1010][1010];
    int longestPalindromeSubseq(string s) {
        int n=s.size();
        for(int j=0;j<n;j++){	//注意动态规划必须先解决子问题，因此i和j的遍历顺序必须是这样的（i左边界，j右边界）
            for(int i=j;i>=0;i--){
                if(i==j)
                    dp[i][j]=1;
                else if(j==i+1)
                    dp[i][j]=(s[i]==s[j])?2:1;
                else{
                    int t=0;
                    if(s[i]==s[j])
                        t=2;
                    dp[i][j]=max(dp[i+1][j-1]+t,max(dp[i+1][j],dp[i][j-1]));
                }
            }
        }
        return dp[0][n-1];
    }
};


```
***
**方法二：递归**
```java
public class Question6_递归解法 {
    public static void main(String[] args) {
        String s=new Scanner(System.in).nextLine().toLowerCase();
        System.out.println(subStrLen(s));
    }
    //递归计算最长回文子序列的长度
    public static int subStrLen(String s){
        if(s.length()==1)
            return 1;
        if(s.length()==2){
            if(s.charAt(0)==s.charAt(1))
                return 2;
            else
                return 0;
        }
        int maxSubStrLen=1;
        for(int dist=1;dist<=s.length()-3;dist++){
            for(int i=1;i<s.length()-1;i++){
                for(int j=i+dist;j<s.length()-1;j++){
                    int record=subStrLen(s.substring(i,j+1));
                    if(record>maxSubStrLen)
                        maxSubStrLen=record;
                }
            }
        }
        if(s.charAt(0)==s.charAt(s.length()-1))
            return 2+maxSubStrLen;
        else
            return maxSubStrLen;
    }
}
```