---
title: 排序算法稳定性
category: 算法
tag:
  - 排序
---

什么叫稳定和不稳定排序？

答：相同元素前后顺序不发生改变的叫稳定排序；会发生改变的叫不稳定排序



**稳定的排序算法**：直接插入排序、冒泡排序、归并排序、基数排序

**不稳定的排序算法**：希尔排序、快速排序、简单选择排序、堆排序



- 为什么**直接插入排序**稳定？

  因为新元素向左找位置的时候，遇到相等的就停止了，因此相同元素的前后顺序不会发生改变

- 为什么**冒泡排序**稳定？

  冒泡排序每一轮通过两两比较和交换的方式，将最大值移动到末尾。遇到两个比较元素相同的时候，当然不会闲着没事进行交换。因此稳定。

- 为什么**归并排序**稳定？

  归并是把问题划分为多个小规模问题，将小规模问题解决完之后，再做合并操作。比如将两个已经排好序的子序列做合并操作，此时如果有相同的值分别存在于两个子序列中，我们可以**先将左边数组中的数插入到临时数组中，再将右边数组的数插入到临时数组中**。这样一来就可以确保相同值相对顺序不变。因此是稳定的。

- 为什么**基数排序**稳定？

  基数排序是一种桶排序，每次在入桶的时候，遇到相同元素，将左侧元素放上边即可保证稳定。

第一轮

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016172841041.png" alt="image-20211016172841041" style="zoom: 50%;"  align=left />

***

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016173001981.png" alt="image-20211016173001981" style="zoom: 50%;" align=left />

第二轮

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016173035633.png" alt="image-20211016173035633" style="zoom: 50%;" align=left />

***

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016173057780.png" alt="image-20211016173057780" style="zoom:50%;" align=left />

第三轮

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016173135356.png" alt="image-20211016173135356" style="zoom: 50%;" align=left  />

***

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016173201072.png" alt="image-20211016173201072" style="zoom:50%;" align=left />

第四轮

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016173236854.png" alt="image-20211016173236854" style="zoom:50%;" align=left />

***

34 49 66 100 137 1002 1234



- 为什么**简单选择排序**不稳定？

  比如对于数组[5,5,5,3,7,1]来说，3比5小，我们把二者交换位置之后，第一个5就跑到了3的位置，这样一来，第一个5就跑到了第二、三个5的后面了，相对顺序变了，因此不稳定。

- 为什么**堆排序**不稳定？

  比如对于[3，4，4，5]这样的一棵树来说，在构建大顶堆的过程中，会将5这个节点与它的父节点交换位置，变成[3，5，4，4]，这样一来，第一个4就跑到了第二个4的后面，相对顺序变了，因此不稳定。

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016170419815.png" alt="image-20211016170419815" style="zoom: 33%;" align=left />

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016170508652.png" alt="image-20211016170508652" style="zoom:33%;" align=left />

<img src="https://yfx-blog-image.oss-cn-hangzhou.aliyuncs.com/img/image-20211016170628602.png" alt="image-20211016170628602" style="zoom:33%;" align=left />

